\chapter{Environment}
\label{Environment}
\index{environment}

Utilities and databases which allow \aipspp\ users and programmers to
define their \aipspp\ environment \footnote{Last change:
$ $Id$ $}.

% ----------------------------------------------------------------------------

\section{\exe{aipsinit}}
\label{aipsinit}
\label{aipsinit.csh}
\label{aipsinit.sh}
\index{aipsinit@\exe{aipsinit}}
\index{aipsinit@\exe{aipsinit}!aipsinit.csh@\exe{aipsinit.csh}}
\index{aipsinit@\exe{aipsinit}!aipsinit.es@\exe{aipsinit.es}}
\index{aipsinit@\exe{aipsinit}!aipsinit.rc@\exe{aipsinit.rc}}
\index{aipsinit@\exe{aipsinit}!aipsinit.sh@\exe{aipsinit.sh}}
\index{environment!initialization|see{\exe{aipsinit}}}
\index{initialization|see{\exe{aipsinit}}}

\aipspp\ initialization procedure.

\subsection*{Synopsis}

\begin{synopsis}
   \verb+. aipsinit.sh        +...for Bourne-like shells, e.g. \unixexe{sh},
                                  \unixexe{bash}, \unixexe{ksh} \\
   \verb+source aipsinit.csh  +...for \textsc{c}-like shells, e.g.
                                  \unixexe{csh}, \unixexe{tcsh} \\
   \verb+. aipsinit.rc        +...for the \unixexe{rc} shell \\
   \verb+. aipsinit.es        +...for the \unixexe{es} shell
\end{synopsis}

\subsection*{Description}

The \exe{aipsinit} scripts define the \code{\$AIPSPATH} environment variable
required by \aipspp, and modify the \code{PATH} environment variable (and
\code{MANPATH} if defined) to include the relevant \aipspp\ \file{bin} (and
\file{man}) directories.  They are normally invoked at login by the
\file{.profile} or \file{.login} files.

The \code{\$AIPSPATH} environment variable consists of a sequence of four
character strings separated by spaces containing the following information:

\begin{enumerate}
\item
   Root of the \aipspp\ directory tree.

\item
   Host ``architecture''.

\item
   Local site name.

\item
   Host name.

\end{enumerate}

\exe{aipsinit} modifies the \code{PATH} environment variable to include the
\aipspp\ binary directories as follows:

\begin{enumerate}

\item
   Firstly, any prior \aipspp\ path definition is either removed, or if
   \code{\$AIPSPATH} was already defined, translated back into an
   \code{aips\_bin} keyword.

\item
   If the keyword \code{aips\_bin} is encoded into \code{PATH} it is replaced
   with the fully qualified pathname.

\item
   If the \code{aips\_bin} keyword is not present, the \aipspp\ \file{bin}
   directory is added to the start of \code{PATH}, following ``\file{.}'' if
   it came first.

\end{enumerate}

The keyword mechanism allows full control over placement of the \aipspp\ 
\file{bin} directories in \code{PATH} and is the recommended method.

If \code{\$AIPSPATH} is already defined when \exe{aipsinit} is invoked it will
also check for any \aipspp\ programmer directories in the \code{PATH}, for
example any referring to programmer \file{bin} directories, and if so will
attempt to amend them.  This works only if the programmer workspace is rooted
at a directory named \file{aips++}.

If the \code{MANPATH} environment variable is defined, \exe{aipsinit} modifies
it in the same manner as for \code{PATH} except using the \code{aips\_doc}
keyword.  If the \code{aips\_doc} keyword is not present, the \aipspp\ 
\file{man} area is always added to the start of \code{MANPATH}.

The host ``architecture'', a string of the form \code{<base>[\_<ext>]},
corresponds to a subdirectory of the \aipspp\ root directory in which an
\aipspp\ system resides (object libraries, executables,...).  The base part of
the name is a mnemonic predefined by \aipspp\ which describes the binary
format of a machine and reflects the combination of machine architecture and
operating system.  The optional extension is used to select between
alternative systems of the same binary format, for example as may have been
generated by different compilers.

\exe{aipsinit} recognizes an environment variable (or shell variable in
\file{aipsinit.csh}) \code{aips\_ext} which, if defined, overrides the
architecture extension defined in the \filref{aipshosts} file for a particular
machine.  By convention, setting \code{aips\_ext} to ``\code{\_}'' signals no
extension, that is, any architecture extension specified in \file{aipshosts}
is stripped off.  For certain shells (\unixexe{bash}, \unixexe{csh},
\unixexe{es}, \unixexe{ksh}, \unixexe{rc}, and \unixexe{tcsh}) \exe{aipsinit}
also defines an alias or shell function also called \exe{aipsinit} which takes
a value for \code{aips\_ext} as an argument and reinvokes \exe{aipsinit}.
This provides a convenient mechanism for interactively switching between
architecture extensions.  Note that \exe{aipsinit} always undefines
\code{aips\_ext}.


\subsection*{Options}

The \exe{aipsinit} scripts take no options directly (such scripts cannot take
arguments).  However, see the description of the \code{aips\_bin} and
\code{aips\_doc} keywords above, and also the \code{aips\_ext} environment (or
shell) variable.


\subsection*{Resources}

The information for setting the architecture and site name is contained in the
\filref{aipshosts} file.  If this does not contain an entry for a particular
machine, \exe{aipsinit} tries to deduce it.

\subsection*{Examples}

\noindent
For Bourne-like shells the following sequence might be used in
\file{.profile}:

\begin{verbatim}
   PATH=".:$HOME/bin:aips_bin:/usr/local/bin:/usr/ucb:/usr/bin:/bin"
   MANPATH=".:$HOME/man:aips_doc:/usr/local/man:/usr/man"
   [ -f /aips++/aipsinit.sh ] && . /aips++/aipsinit.sh
\end{verbatim}

\noindent
For \textsc{c}-like shells the following sequence might be used in
\file{.login}:

\begin{verbatim}
   setenv PATH ".:~/bin:aips_bin:/usr/local/bin:/usr/ucb:/usr/bin:/bin"
   setenv MANPATH ".:~/man:aips_doc:/usr/local/man:/usr/man"
   if (-f /aips++/aipsinit.csh) source /aips++/aipsinit.csh
\end{verbatim}

\noindent
or alternatively

\begin{verbatim}
   set path = (. ~/bin aips_bin /usr/local/bin /usr/ucb /usr/bin /bin)
   if (-f /aips++/aipsinit.csh) source /aips++/aipsinit.csh
\end{verbatim}

\noindent
For the \unixexe{rc} shell the following sequence might be used in
\file{.rcrc}:

\begin{verbatim}
   PATH=.:$HOME/bin:aips_bin:/usr/local/bin:/usr/ucb:/usr/bin:/bin
   MANPATH=.:$HOME/man:aips_doc:/usr/local/man:/usr/man
   if (test -f /aips++/aipsinit.rc) . /aips++/aipsinit.rc
\end{verbatim}

\noindent
For the \unixexe{es} ``extensible'' shell the following sequence might be used
in \file{.esrc}:

\begin{verbatim}
   PATH=.:$HOME/bin:aips_bin:/usr/local/bin:/usr/ucb:/usr/bin:/bin
   MANPATH=.:$HOME/man:aips_doc:/usr/local/man:/usr/man
   if {test -f /aips++/aipsinit.es} {. /aips++/aipsinit.es}
\end{verbatim}

\subsection*{Files}

\begin{description}
\item[\file{\$AIPSROOT/aipshosts}]
...database of \aipspp\ hosts.

\item[\file{\$AIPSROOT/.login}]
...\acct{aips2mgr}'s \file{.login} file.

\item[\file{\$AIPSROOT/.profile}]
...\acct{aips2mgr}'s \file{.profile} file.
\end{description}

\noindent
The \filref{.login} and \filref{.profile} files are provided for
\acct{aips2mgr}'s interactive and \unixexe{cron} jobs.

\subsection*{See also}

\filref{aipshosts}, \aipspp\ hosts database.\\
\filref{.login}, \acct{aips2mgr}'s \file{.login} file.\\
\filref{.profile}, \acct{aips2mgr}'s \file{.profile} file.

\subsection*{Author}

Original: 1992/03/05 by Mark Calabretta, ATNF.

% ----------------------------------------------------------------------------

\newpage
\section{\file{aipshosts}}
\label{aipshosts}
\index{aipshosts@\file{aipshosts}}
\index{database!hosts|see{\file{aipshosts}}}
\index{hosts|see{\file{aipshosts}}}
\index{system!configuration!hosts|see{\file{aipshosts}}}

\aipspp\ hosts database.

\subsection*{Synopsis}

\begin{synopsis}
   \file{\$AIPSROOT/aipshosts}
\end{synopsis}

\subsection*{Description}

The \file{aipshosts} database is an \textsc{ascii} file containing a list of
\aipspp\ hosts at a site (or possibly at a set of sites within an
institution).  It is used by the \exeref{aipsinit} scripts in
defining the \code{\$AIPSPATH} environment variable.

\file{aipshosts} provides a means of specifying an architecture and site for a
set of \aipspp\ hosts.  Its existence was prompted by the fact that there is
no generic way to determine a machine's architecture.  However, in addition to
machine architectures, the architecture may differentiate between operating
system versions or compilers where there is a choice of these at a particular
site.  Hosts from several sites within an institution may be included within
one \file{aipshosts} file thereby making it possible to copy an \aipspp\ 
installation verbatim from the central site to a remote site.

\file{aipshosts} is initially constructed by the \exeref{configure} script
when \aipspp\ is first installed.  Thereafter it can be maintained manually by
adding, deleting or modifying entries as required.

Each host has a one-line entry in the \file{aipshosts} file, the format of
which is as follows:

\begin{enumerate}
\item
   The host name.  A catch-all value ``\code{DEFAULT}'' applies to any host
   which does not have a specific entry. If the default is ``\code{NONE}''
   then the aipsinit scripts will not setup \code{AIPSPATH} for any host
   not explicitly listed in \file{aipshosts}.

\item
   The host architecture.  This specifies a subdirectory of \file{\$AIPSROOT},
   referred to as \file{\$AIPSARCH} (\sref{variables}), in which the \aipspp\ 
   system for the machine resides.  In particular, the \file{bin} and
   \file{doc} subdirectories of \file{\$AIPSARCH} are encoded into the
   \code{PATH} and \code{MANPATH} environment variables by \exeref{aipsinit}.

   The host ``architecture'' is a string of the form \code{<base>[\_<ext>]}.
   The base part of the name describes the binary format of a machine and
   reflects the combination of machine architecture and operating system.
   Because some \aipspp\ scripts may need to switch on architecture type,
   the base part of the architecture name has been standardized.  Currently
   recognized values are:

\begin{verbatim}
   alpha      ...DEC/Alpha, OSF/1
   hpux       ...Hewlett-Packard, HPUX
   ibmrs      ...IBM RS6000, AIX
   sgi        ...Silicon Graphics, IRIX
   sun4       ...SUNsparc, SunOS 4.x
   sun4sol    ...SUNsparc, Solaris 2.x
\end{verbatim}

   \noindent
   An optional extension to the architecture type can be used to select
   between alternative systems of the same binary format, for example as may
   have been generated by different compilers, or different compiler options.
   Apart from not containing an ``\code{\_}'' or ``\code{:}'', the extension
   may be freely chosen.  However, in order to provide template
   \filref{makedefs} and \filref{aipsrc} files when \aipspp\ is installed,
   \exeref{configure}) recognizes a number of standard combinations.
   Specifically

   \begin{itemize}
   \item
      The compiler supplied with the operating system (whether bundled or
      unbundled) is denoted by \code{ntv}.

   \item
      The GNU compiler (\unixexe{g++}) is denoted by \code{gnu}.

   \end{itemize}

   Where it's desired to maintain several systems using different compiler
   options within the one \aipspp\ installation (for example, different
   levels of optimization) this may be denoted by \code{O}\textit{n}, where
   \textit{n} is an optional digit.  This should be placed {\em after} any
   compiler specification, separated by a "\code{-}", for example,
   \code{sun4sol\_gnu-O2}.  (Note that \aipspp\ already supports separate
   debug and optimized compilations within each system.)

   Any architecture extension defined in \file{aipshosts} serves only as the
   default for a particular machine.  \exeref{aipsinit} provides a mechanism
   which allows it to be redefined on demand.

\item
   The site name.  This specifies a subdirectory of the \code{\$AIPSARCH}
   directory (\sref{variables}) containing the site-specific configuration
   files \filref{aipsrc}) and \filref{makedefs}.  The site name is chosen when
   \aipspp\ is first installed and thereafter must be used consistently for
   all hosts at a site.

\item
   A comment which may usefully describe the machine and has no other purpose.

\end{enumerate}

\noindent
Comments within the \file{aipshosts} file are denoted by a \code{\#} in column
1, and blank lines are ignored.

Note that when hosts are added to the system the host-specific system area
may be created beneath \file{\$AIPSSITE} (\sref{variables}) to hold
host-specific databases (see \filref{aipsrc}).  Likewise, when a host is
removed its system area should be deleted.

\subsection*{Examples}

The following might be a fragment of an \file{aipshosts} file covering all
of ATNF.

\begin{verbatim}
   # AIPS++ host database

   DEFAULT   sun4sol_ntv   epping
   cetus     sun4sol_ntv   epping          Sun Ultra 1, AIPS++ server Room 85
   raptor    sgi_gnu       epping          Silicon Graphics, computer room.
   corvus    sun4sol_gnu   culgoora        Sun 4/65 SPARC 1+, control room.
   yeti      alpha_gnu     parkes          AlphaServer 1000 4/266
\end{verbatim}

\subsection*{Files}

\begin{description}
\item[\file{\$AIPSROOT/aipshosts}]
...database of \aipspp\ hosts.
\end{description}

\subsection*{See also}

\aipspp\ variable names (\sref{variables}).\\
\exeref{aipsinit}, \aipspp\ initialization procedure.\\
\filref{aipsrc}, \aipspp\ resource database.\\
\exeref{configure}, \aipspp\ installation script.\\
\filref{makedefs}, \aipspp\ makefile definitions.

% ----------------------------------------------------------------------------

\newpage
\section{\file{aipsrc}}
\label{aipsrc}
\index{aipsrc@\file{aipsrc}}
\index{resources!database|see{\file{aipsrc}}}
\index{database!resources|see{\file{aipsrc}}}

\aipspp\ resource database.

\subsection*{Synopsis}

\begin{synopsis}
   \file{aipsrc}
\end{synopsis}

\subsection*{Description}

The \file{aipsrc} files store \code{keyword:value} entries used by \aipspp\ 
scripts and programs.  The mechanism is similar to that of \file{.Xdefaults}
on which it is modelled.  The form of an \file{aipsrc} entry is

\begin{verbatim}
   keyword: value
\end{verbatim}

\noindent
where the keyword, which must begin in column 1, usually consists of a
sequence of character strings separated by asterisks (*) or periods (.), and
terminated by a colon (:).  The value consists of everything after the last
whitespace character (space or tab) following the colon.

Keywords may use ``*'' as a wildcard.  However, since the procedure which
reads the \file{aipsrc} file accepts the first match it finds, the order of
the entries may be significant.  For example, consider the following two
\file{aipsrc} entries

\begin{verbatim}
   printer*paper:              A4
   printer.dp1.paper:          A3
\end{verbatim}

\noindent
If a match was requested for the keyword \code{printer.dp1.paper} the first
entry would be returned, contrary to what was probably wanted.  In fact, the
second entry would never be operative.

Comments in the aipsrc file have a \code{\#} in column 1, and blank lines are
ignored.

\subsection*{Resources}

The following \file{aipsrc} files are consulted in sequence by \exeref{getrc}
until a match is found (except that a user's \file{~/.aipsrc} is ignored if
the \exe{-i} option is specified)

\begin{verbatim}
   ~/.aipsrc
   $AIPSROOT/.aipsrc
   $AIPSHOST/aipsrc
   $AIPSSITE/aipsrc
   $AIPSARCH/aipsrc
\end{verbatim}

\subsection*{Examples}

To specify the paper types for a collection of printers:

\begin{verbatim}
   printer.dp1.paper:          A3
   printer.ps0.paper:          letter
   printer*paper:              A4
\end{verbatim}

\noindent
sets the paper type for \code{dp1} to \code{A3}, for \code{ps0} to
\code{letter}, and everything else to \code{A4}.

Note that \file{\$AIPSROOT/.aipsrc} should only be used to define resources
which are not directly relevant to a particular \aipspp\ system (as defined by
the architecture in \filref{aipshosts}).  This is prompted by the desire that
where there are several systems each should be self-contained and independent
of the others.  Examples of resources which may appropriately be defined in
\file{\$AIPSROOT/.aipsrc} would be those relating to \exeref{inhale}), since
\aipsexe{inhale} can be thought of as operating at the \file{\$AIPSROOT}
level.

\file{\$AIPSARCH/aipsrc} contains default values for all recognized resources
and is maintained by the system.  It should not be modified; overriding
definitions should instead be made in any of the other \file{aipsrc} files in
the sequence.

\subsection*{See also}

\exeref{getrc}, query \aipspp\ resource database.\\
\exeref{affirm}, get the Boolean value of a set of arguments.\\

\subsection*{Author}

Original: 1992/03/05 by Mark Calabretta, ATNF.

% ----------------------------------------------------------------------------

\newpage
\section{\textit{.cshrc}}
\label{.cshrc}
\index{.cshrc@\file{.cshrc}}
\index{.cshrc\_local@\file{.cshrc\_local}|see{\file{.cshrc}}}
\index{cshrc@\file{cshrc}|see{\file{.cshrc}}}
\index{cshrc\_local@\file{cshrc\_local}|see{\file{.cshrc}}}
\index{environment!\textsc{c}-shell initialization|see{\file{.cshrc}}}

\aipspp\ \file{.cshrc} file.

\subsection*{Synopsis}

\begin{synopsis}
   \code{source .cshrc}
\end{synopsis}

\subsection*{Description}

The \file{.cshrc} file which resides in \file{\$AIPSROOT} is installed there
as part of the \aipspp\ system to provide a minimal environment in
\textsc{c}-like shells (\unixexe{csh}, \unixexe{tcsh}) for the \aipspp\
manager.

If \exeref{inhale} is being run to keep the \aipspp\ installation in step with
the master then any changes made to this file would be overwritten whenever
the system master was modified.  Additional definitions or redefinitions may
instead be made in a separate \file{.cshrc\_local} file which is invoked by
\file{.cshrc} as its last operation.

The commands contained in \file{.cshrc} are executed immediately upon login
and upon creation of every \textsc{c}-shell.  They usually consist of
definitions of aliases and \textsc{c}-shell variables since these are
{\em not} inherited by subprocesses, although certain important shell
variables (\code{argv}, \code{cwd}, \code{home}, \code{path}, \code{prompt},
\code{shell}, \code{status}, \code{term}, and \code{user}) {\em are}
automatically set.

Environment variable definitions are normally made in the \file{.login} file
since the environment {\em is} automatically inherited by every subprocess.
This includes \code{PATH} and \code{MANPATH} in particular.  However, remote
shells such as are activated by \unixexe{rsh} do not read the \file{.login}
file (assuming that \unixexe{csh} is the default login shell).  If these
environment variables need to be defined automatically in such cases the
following line should be added to the \file{.cshrc\_local} file

\begin{verbatim}
   if (! $?term) source $AIPSROOT/.login
\end{verbatim}

\noindent
Note, however, that the \exeref{.rshexec} command should normally be used for
remote execution.

The \textsc{c}-shell startup files are read in the following order:

\begin{verbatim}
   .cshrc
   .cshrc_local
   .login
   .login_local
\end{verbatim}

\subsection*{See also}

\aipspp\ variable names (\sref{variables}).\\
\exeref{aipsinit}, \aipspp\ initialization procedure.\\
\filref{.login}, \acct{aips2mgr}'s \file{.login} file.\\
\filref{.profile}, \acct{aips2mgr}'s \file{.profile} file.\\
\filref{.prompt}, Set the \textsc{c}-shell \code{prompt} variable.\\
\exeref{.rshexec}, \aipspp\ remote execution utility.

\subsection*{Author}

Original: 1992/05/01 by Mark Calabretta, ATNF.

% ----------------------------------------------------------------------------

\newpage
\section{\textit{.exrc}}
\label{.exrc}
\index{.exrc@\file{.exrc}}
\index{exrc@\file{exrc}|see{\file{.exrc}}}
\index{environment!vi@\unixexe{vi} initialization|see{\file{.exrc}}}

\aipspp\ \file{.exrc} file.

\subsection*{Synopsis}

\begin{synopsis}
   Default environment for \unixexe{vi}.
\end{synopsis}

\subsection*{Description}

The \file{.exrc} file which resides in \file{\$AIPSROOT} is installed there as
part of the \aipspp\ system to initialize the \unixexe{vi} environment for the
\aipspp\ manager.

If \exeref{inhale}) is being run to keep the \aipspp\ installation in step
with the master then any changes made to this file would be overwritten
whenever the master version was modified.

\subsection*{Author}

Original: 1992/05/02 by Mark Calabretta, ATNF.

% ----------------------------------------------------------------------------

\newpage
\section{\exe{getrc}}
\label{getrc}
\index{getrc@\exe{getrc}}
\index{resources!query|see{\exe{getrc}}}

Query the \aipspp\ resource database.

\subsection*{Synopsis}

\begin{synopsis}
   \code{\exe{getrc} [\exe{-i}] [\exe{-v}] keyword}
\end{synopsis}

\subsection*{Description}

\exe{getrc} fetches keyword values from the \filref{aipsrc} databases.  The
mechanism has some similarities with that of the \file{.Xdefaults} database in
X-windows.  \exe{getrc} searches a set of \file{aipsrc} databases (listed
below) in sequence to find a match for the keyword specified on the command
line.

\subsection*{Options}

\begin{description}
\item[\exe{-i}]
   Ignore the user's \file{~/.aipsrc} file.  This is useful to obtain keyword
   values over which the user is not allowed to have control.

\item[\exe{-v}]
   Verbose mode.  \exe{getrc} reports on \file{stderr} the name of the file in
   which it matched the keyword, and also the matching entry.  Primarily used
   for debugging.
\end{description}

\subsection*{Resources}

All \aipspp\ resources are within the scope of \exe{getrc}.

\subsection*{Diagnostics}

\exe{getrc} returns 0 on success with the value on \file{stdout}.  Otherwise,
it returns a message on \file{stderr} with a non-zero status as follows

Status return values
\\ \verb+   0+: success
\\ \verb+   1+: usage error
\\ \verb+   2+: \code{\$AIPSPATH} not defined
\\ \verb+   3+: \file{\$HOME} not defined
\\ \verb+   4+: invalid regular expression
\\ \verb+   5+: pattern not matched

\subsection*{Examples}

To get the default printer (Bourne shell):
\begin{verbatim}
   PRI=`getrc printer.default 2> /dev/null`
\end{verbatim}

\noindent
To see where the default printer definition was found:
\begin{verbatim}
   grus% getrc -v printer.default
   sw_hutt
   Line matched in file /aips++/sun4/epping/grus/aipsrc was
   printer*default:                sw_hutt
\end{verbatim}

\subsection*{Files}

The following \file{aipsrc} files are consulted in sequence, except that
\file{~/.aipsrc} is ignored if the \exe{-i} option is specified.

\begin{verbatim}
   ~/.aipsrc
   $AIPSROOT/.aipsrc
   $AIPSHOST/aipsrc
   $AIPSSITE/aipsrc
   $AIPSARCH/aipsrc
\end{verbatim}

\noindent
It is not an error for any of these files to be absent or empty.  Refer to
the entry for \filref{aipsrc} for an explanation of how the \file{aipsrc}
files are used.

\subsection*{See also}

\aipspp\ variable names (\sref{variables}).\\
\filref{aipsrc}, \aipspp\ resource database.\\
\exeref{affirm}, get the Boolean value of a set of arguments.

\subsection*{Author}

Original: 1992/03/05 by Mark Calabretta, ATNF.

% ----------------------------------------------------------------------------

\newpage
\section{\textit{.login}}
\label{.login}
\index{.login@\file{.login}}
\index{.login\_local@\file{.login\_local}|see{\file{.login}}}
\index{login@\file{login}|see{\file{.login}}}
\index{login\_local@\file{login\_local}|see{\file{.login}}}
\index{environment!\textsc{c}-shell login|see{\file{.login}}}

\aipspp\ \file{.login} file.

\subsection*{Synopsis}

\begin{synopsis}
   \code{source .login}
\end{synopsis}

\subsection*{Description}

The \file{.login} file which resides in \file{\$AIPSROOT} is installed there
as part of the \aipspp\ system to provide a minimal interactive environment
in \textsc{c}-like shells (\unixexe{csh}, \unixexe{tcsh}) for the \aipspp\ 
manager (assuming that one of these is the default login shell).

If \exeref{inhale} is being run to keep the \aipspp\ installation in step with
the master then any changes made to this file would be overwritten whenever
the system master was modified.  Additional definitions or redefinitions may
instead be made in a separate \file{.login\_local} file which is invoked by
\filref{.login} as its last operation before invoking
\filref{aipsinit.csh}.

If \file{.login\_local} is present it must define the \code{PATH} and
\code{MANPATH} environment variables, but must not invoke \exeref{aipsinit}.
If \file{.login\_local} is not present \file{.login} will supply reasonable
but probably inadequate defaults for \code{PATH} and \code{MANPATH}.

The commands contained in \file{.login} are executed after \file{.cshrc} upon
login (or if the \textsc{c}-shell is invoked via a name beginning with "-").
They usually consist of terminal setup commands and environment variable
definitions which are automatically inherited by every subprocess.

Definitions of aliases and \textsc{c}-shell variables are {\em not} inherited
by subprocesses and so are usually made in \file{.cshrc} which is invoked by
every shell (although certain important shell variables \code{argv},
\code{cwd}, \code{home}, \code{path}, \code{prompt}, \code{shell},
\code{status}, \code{term}, and \code{user} {\em are} automatically
propagated to each subprocess).

Remote shells such as are activated by \unixexe{rsh} do not read the
\file{.login} file (assuming that \unixexe{csh} or \unixexe{tcsh} is the
default shell).  If the \file{.login} file needs to be invoked automatically
in such cases the following line should be added to the \file{.cshrc\_local}
file

\begin{verbatim}
   if (! $?term) source $AIPSROOT/.login
\end{verbatim}

\noindent
Note, however, that the \exeref{.rshexec} command should normally be used for
remote execution.

The \textsc{c}-shell startup files are read in the following order:

\begin{verbatim}
   .cshrc
   .cshrc_local
   .login
   .login_local
\end{verbatim}

\subsection*{See also}

\aipspp\ variable names (\sref{variables}).\\
\exeref{aipsinit}, \aipspp\ initialization procedure.\\
\filref{.cshrc}, \acct{aips2mgr}'s \file{.cshrc} file.\\
\filref{.profile}, \acct{aips2mgr}'s \file{.profile} file.\\
\exeref{.rshexec}, \aipspp\ remote execution utility.

\subsection*{Author}

Original: 1992/05/01 by Mark Calabretta, ATNF.

% ----------------------------------------------------------------------------

\newpage
\section{\textit{.profile}}
\label{.profile}
\index{.profile@\file{.profile}}
\index{.profile\_local@\file{.profile\_local}|see{\file{.profile}}}
\index{profile@\file{profile}|see{\file{.profile}}}
\index{profile\_local@\file{profile\_local}|see{\file{.profile}}}
\index{environment!Bourne shell initialization|see{\file{.profile}}}

\aipspp\ \file{.profile} file.

\subsection*{Synopsis}

\begin{synopsis}
   \code{. .profile}
\end{synopsis}

\subsection*{Description}

The \file{.profile} file which resides in \file{\$AIPSROOT} is installed there
as part of the \aipspp\ system to provide a minimal environment for
Bourne-like shells (\unixexe{sh}, \unixexe{ksh}, \unixexe{bash}) for the
\aipspp\ manager.

In particular, \file{.profile} is used to define the environment for the
\aipspp\ manager's \unixexe{cron} jobs, and also for
\exeref{.rshexec}.

If \exeref{inhale}) is being run to keep the \aipspp\ installation in step
with the master then any changes made to this file would be overwritten
whenever the system master was modified.  Additional definitions or
redefinitions may instead be made in a separate \file{.profile\_local} file
which is invoked by \file{.profile} as its last operation before invoking
\filref{aipsinit.sh}.


If \file{.profile\_local} is present it must define the \code{PATH} and
\code{MANPATH} environment variables, but must not invoke \exeref{aipsinit}.
If \file{.profile\_local} is not present \file{.profile} will supply
reasonable but probably inadequate defaults for \code{PATH} and \code{MANPATH}.

The commands contained in \file{.profile} are executed upon login (or if the
shell is invoked via a name beginning with "-").  They usually consist of
terminal setup commands and environment variable definitions which are
automatically inherited by every subprocess.

Remote shells such as are activated by \unixexe{rsh} do not read the
\file{.profile} file (assuming that \unixexe{sh}, \unixexe{ksh} or
\unixexe{bash} is the default login shell).  In such cases the
\exeref{.rshexec} command should be used.

The Bourne-shell startup files are read in the following order:

\begin{verbatim}
   .profile
   .profile_local
\end{verbatim}

\subsection*{See also}

The unix manual page for \unixexe{cron}(1).\\
\aipspp\ variable names (\sref{variables}).\\
\exeref{aipsinit}, \aipspp\ initialization procedure.\\
\filref{.cshrc}, \acct{aips2mgr}'s \file{.cshrc} file.\\
\filref{.login}, \acct{aips2mgr}'s \file{.login} file.\\
\exeref{.rshexec}, \aipspp\ remote execution utility.

\subsection*{Author}

Original: 1992/04/30 by Mark Calabretta, ATNF.

% ----------------------------------------------------------------------------

\newpage
\section{\textit{.prompt}}
\label{.prompt}
\index{.prompt@\file{.prompt}}
\index{prompt@\file{prompt}|see{\file{.prompt}}}
\index{environment!\textsc{c}-shell prompt|see{\file{.prompt}}}

Set the \code{prompt} variable for \unixexe{csh}-like shells.

\subsection*{Synopsis}

\begin{synopsis}
   \code{alias cd 'chdir $\backslash$!*; source \$AIPSROOT/.prompt'}\\
   \code{source \$AIPSROOT/.prompt}
\end{synopsis}

\subsection*{Description}

The \unixexe{cd} command is aliased in \filref{.cshrc} to invoke
\file{.prompt} whenever the current working directory is changed (as above).

For \unixexe{csh} and \unixexe{tcsh} running in \unixexe{xterm},
\unixexe{suntool}, and \unixexe{cmdtool} windows, \file{.prompt} encodes an
escape sequence in the \code{prompt} shell variable which identifies the
subprocess depth, the user and host names, and current working directory in
the window label, and also the host name and command number in the interactive
prompt.

Since \unixexe{csh} in some systems does not process escape sequences encoded
into the \code{prompt} variable (for example, AIX and Solaris 2.2),
\file{.prompt} recognizes a shell variable \code{noAutoWinLabel} which causes
it simply to echo the escape sequence on \file{stdout} and set \code{prompt}
to print the host name and command number.  However, this method fails to
reset the window label on logout from a subshell.

For other windows or ordinary terminals \file{.prompt} simply encodes the user
and host names, the last two elements of the current working directory, and
command number into the \code{prompt} shell variable.

\subsection*{See also}

\aipspp\ variable names (\sref{variables}).\\
\filref{.cshrc}, \acct{aips2mgr}'s \file{.cshrc} file.

\subsection*{Author}

Original: 1992/05/01 by Mark Calabretta, ATNF.

% ----------------------------------------------------------------------------

\newpage
\section{\exe{.rshexec}}
\label{.rshexec}
\index{.rshexec@\exe{.rshexec}}
\index{rshexec@\exe{rshexec}|see{\exe{.rshexec}}}
\index{environment!remote execution|see{\exe{.rshexec}}}

Remote execution utility.

\subsection*{Synopsis}

\begin{synopsis}
   \code{\unixexe{rsh} \host{remotehost} \$AIPSROOT/\exe{.rshexec} [\exe{-i}]
      [\exe{-e} aips\_ext] command [options]}
\end{synopsis}

\subsection*{Description}

\exe{.rshexec} defines the \aipspp\ environment for a process invoked by
\unixexe{rsh} and then \unixexe{exec}'s the command with any specified
arguments.

\subsection*{Options}

\begin{description}
\item[\exe{-i}]
   Report the command before \unixexe{exec}'ing it.

\item[\exe{-e} aips\_ext]
   Specify an alternative \aipspp\ architecture extension, \code{aips\_ext}
   (see \exeref{aipsinit}).
\end{description}

\subsection*{Examples}

To see what the \code{\$AIPSPATH} environment variable is defined to be on
remote host \host{lynx}:

\begin{verbatim}
   rsh lynx $AIPSROOT/.rshexec echo \''$AIPSPATH'\'
\end{verbatim}

\noindent
Note here that \file{\$AIPSROOT} is evaluated on the local machine and it is
assumed that it has the same value on the remote machine.  Also note that the
\code{\$AIPSPATH} argument is protected by two sets of single quotes, the
inner pair prevents the environment variable from being evaluated on the local
machine, and the outer pair which is escaped to protect them from the local
shell protects the environment variable from being evaluated by the login
shell on the remote machine.

\subsection*{See also}

The unix manual page for \unixexe{rsh}(1).\\
\exeref{aipsinit}, \aipspp\ initialization procedure.\\
\filref{.profile}, \acct{aips2mgr}'s \file{.profile} file.\\
\exeref{inhale}, \aipspp\ code import utility.

\subsection*{Author}

Original: 1993/07/14 by Mark Calabretta, ATNF.
